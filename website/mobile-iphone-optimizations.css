/**
 * Mobile Optimizations for iPhone - Solomon's Landing
 * Ultra-optimizado para iPhone 12, 13, 14, 15 Pro Max
 * Enfoque especial en formulario de reservaciones
 */

/* ========================================
   iPhone Base Optimizations
   ======================================== */

/* Todos los iPhones */
@media only screen and (max-width: 480px) {
    
    /* iOS Safari optimizations */
    * {
        -webkit-tap-highlight-color: rgba(255, 201, 60, 0.2);
        -webkit-touch-callout: none;
        -webkit-user-select: none;
        user-select: none;
    }
    
    input, textarea, select, button {
        -webkit-user-select: text;
        user-select: text;
    }

    html {
        font-size: 16px !important; /* Prevents zoom on input focus */
        -webkit-text-size-adjust: 100%;
        -ms-text-size-adjust: 100%;
    }

    body {
        overflow-x: hidden;
        position: relative;
        width: 100%;
        max-width: 100vw;
    }

    /* ===== HEADER & NAVIGATION ===== */
    header {
        position: sticky !important;
        top: 0;
        z-index: 1000;
        padding: 0.75rem 1rem !important;
    }

    .header-content {
        flex-direction: row !important;
        justify-content: space-between !important;
        align-items: center !important;
    }

    .logo img {
        height: 45px !important;
        width: auto !important;
    }

    /* Mobile Menu */
    nav {
        position: fixed;
        top: 0;
        right: -100%;
        width: 280px;
        height: 100vh;
        background: white;
        box-shadow: -2px 0 10px rgba(0,0,0,0.1);
        transition: right 0.3s ease;
        z-index: 9999;
        padding: 6rem 2rem 2rem;
        overflow-y: auto;
    }

    nav.active {
        right: 0;
    }

    nav ul {
        flex-direction: column !important;
        gap: 0 !important;
    }

    nav ul li {
        width: 100%;
        margin: 0 !important;
        border-bottom: 1px solid #e5e7eb;
    }

    nav ul li a {
        display: block;
        padding: 1rem !important;
        font-size: 1.1rem !important;
        color: #1e293b !important;
        text-align: left;
    }

    .mobile-menu-toggle {
        display: flex !important;
        flex-direction: column;
        gap: 4px;
        background: none;
        border: none;
        cursor: pointer;
        padding: 0.5rem;
        z-index: 10000;
    }

    .mobile-menu-toggle span {
        display: block;
        width: 25px;
        height: 3px;
        background: white;
        border-radius: 2px;
        transition: all 0.3s ease;
    }

    .mobile-menu-toggle.active span:nth-child(1) {
        transform: rotate(45deg) translate(5px, 5px);
    }

    .mobile-menu-toggle.active span:nth-child(2) {
        opacity: 0;
    }

    .mobile-menu-toggle.active span:nth-child(3) {
        transform: rotate(-45deg) translate(7px, -7px);
    }

    /* ===== HERO SECTIONS ===== */
    .hero,
    .gift-card-hero,
    section.hero {
        padding: 4rem 1.5rem 3rem !important;
        min-height: 50vh !important;
    }

    .hero h1,
    .gift-card-hero h1 {
        font-size: 2rem !important;
        line-height: 1.2 !important;
        margin-bottom: 1rem !important;
    }

    .hero p,
    .gift-card-hero p {
        font-size: 1rem !important;
        line-height: 1.5 !important;
    }

    .hero-subtitle {
        font-size: 1rem !important;
    }

    /* ===== IMAGES ===== */
    img {
        max-width: 100%;
        height: auto;
        display: block;
    }

    .slideshow,
    .home-slideshow {
        height: 60vh !important;
        max-height: 500px !important;
    }

    .slide img,
    .home-slide {
        object-fit: cover !important;
        width: 100% !important;
        height: 100% !important;
    }

    /* Gallery images */
    .gallery-grid,
    .menu-grid,
    .features-grid {
        grid-template-columns: 1fr !important;
        gap: 1.5rem !important;
        padding: 1rem !important;
    }

    /* ===== CONTAINERS & LAYOUTS ===== */
    .container {
        max-width: 100% !important;
        padding: 0 1rem !important;
    }

    .gift-card-container,
    .reservation-container,
    .content-grid {
        grid-template-columns: 1fr !important;
        gap: 2rem !important;
        padding: 1rem !important;
    }

    /* ===== CARDS ===== */
    .card,
    .menu-item,
    .feature-card,
    .gift-card-form,
    .module-card {
        padding: 1.5rem !important;
        margin-bottom: 1.5rem !important;
    }

    .card-design {
        padding: 2rem 1.5rem !important;
    }

    /* ===== BUTTONS ===== */
    button,
    .btn,
    .submit-btn,
    .download-btn,
    a.btn {
        width: 100% !important;
        padding: 1rem !important;
        font-size: 1rem !important;
        margin: 0.5rem 0 !important;
        touch-action: manipulation;
    }

    .btn-group {
        flex-direction: column !important;
        gap: 0.75rem !important;
    }

    /* ===== FORMS ===== */
    .form-group {
        margin-bottom: 1.25rem !important;
    }

    .form-group label {
        font-size: 0.95rem !important;
        margin-bottom: 0.5rem !important;
    }

    .form-group input,
    .form-group textarea,
    .form-group select {
        width: 100% !important;
        padding: 0.875rem !important;
        font-size: 16px !important; /* Prevents iOS zoom on focus */
        border-radius: 8px !important;
    }

    textarea {
        min-height: 120px !important;
    }

    /* Amount options for gift cards */
    .amount-options {
        grid-template-columns: repeat(2, 1fr) !important;
        gap: 0.75rem !important;
    }

    .amount-option {
        padding: 0.875rem 0.5rem !important;
    }

    .amount-option .price {
        font-size: 1.5rem !important;
    }

    /* ===== TEXT ADJUSTMENTS ===== */
    h1 {
        font-size: 2rem !important;
        line-height: 1.2 !important;
    }

    h2 {
        font-size: 1.75rem !important;
        line-height: 1.3 !important;
    }

    h3 {
        font-size: 1.25rem !important;
    }

    p {
        font-size: 1rem !important;
        line-height: 1.6 !important;
    }

    /* ===== MENU SECTIONS ===== */
    .menu-category h2 {
        font-size: 1.5rem !important;
        margin: 2rem 0 1rem !important;
    }

    .menu-item h3 {
        font-size: 1.125rem !important;
    }

    .menu-item .description {
        font-size: 0.875rem !important;
        line-height: 1.5 !important;
    }

    .menu-item .price {
        font-size: 1.5rem !important;
    }

    /* ===== TABLES ===== */
    table {
        font-size: 0.875rem !important;
    }

    table th,
    table td {
        padding: 0.75rem 0.5rem !important;
    }

    /* Make tables scrollable */
    .table-container {
        overflow-x: auto;
        -webkit-overflow-scrolling: touch;
    }

    /* ===== CHATBOT ===== */
    #chatbot-widget {
        width: 100% !important;
        height: 100% !important;
        max-width: none !important;
        max-height: none !important;
        border-radius: 0 !important;
        bottom: 0 !important;
        right: 0 !important;
    }

    #chatbot-button {
        bottom: 20px !important;
        right: 20px !important;
        width: 60px !important;
        height: 60px !important;
    }

    #chatbot-messages {
        padding: 1rem !important;
    }

    .chatbot-message {
        max-width: 85% !important;
        font-size: 0.95rem !important;
        padding: 0.75rem !important;
    }

    /* ===== MODALS ===== */
    .modal-content,
    .success-content {
        width: 95% !important;
        max-width: none !important;
        margin: 1rem !important;
        padding: 2rem 1.5rem !important;
    }

    /* ===== FOOTER ===== */
    footer {
        padding: 2rem 1rem !important;
    }

    footer .footer-content {
        grid-template-columns: 1fr !important;
        gap: 2rem !important;
    }

    footer h3 {
        font-size: 1.125rem !important;
    }

    footer p,
    footer a {
        font-size: 0.875rem !important;
    }

    /* ===== STATS & METRICS ===== */
    .stats-grid {
        grid-template-columns: 1fr !important;
        gap: 1rem !important;
    }

    .stat-card .value {
        font-size: 2.5rem !important;
    }

    /* ===== SPACING ===== */
    section {
        padding: 3rem 1rem !important;
    }

    .section-title {
        margin-bottom: 2rem !important;
    }

    /* ===== PAYMENT ELEMENT (STRIPE) ===== */
    #payment-element {
        padding: 0 !important;
    }

    /* ===== RESERVATION CALENDAR ===== */
    .calendar {
        width: 100% !important;
    }

    .calendar-day {
        min-width: 0 !important;
        padding: 0.5rem !important;
        font-size: 0.875rem !important;
    }

    /* ===== GIFT CARD PREVIEW ===== */
    .gift-card-preview {
        position: relative !important;
        top: 0 !important;
    }

    .card-design .amount {
        font-size: 2.5rem !important;
    }

    .card-design .logo {
        width: 100px !important;
    }

    /* ===== ANIMATIONS - Reduce for performance ===== */
    @media (prefers-reduced-motion: reduce) {
        * {
            animation-duration: 0.01ms !important;
            animation-iteration-count: 1 !important;
            transition-duration: 0.01ms !important;
        }
    }

    /* ===== LANDSCAPE ORIENTATION ===== */
    @media (orientation: landscape) and (max-height: 500px) {
        .hero,
        .slideshow {
            min-height: 100vh !important;
        }

        header {
            padding: 0.5rem 1rem !important;
        }

        .logo img {
            height: 35px !important;
        }
    }

    /* ===== TOUCH TARGETS ===== */
    a,
    button,
    input[type="submit"],
    input[type="button"],
    .clickable {
        min-height: 44px !important;
        min-width: 44px !important;
    }

    /* ===== PREVENT ZOOM ON INPUT FOCUS ===== */
    input[type="text"],
    input[type="email"],
    input[type="tel"],
    input[type="number"],
    textarea,
    select {
        font-size: 16px !important;
    }
}

/* ========================================
   iPhone Plus / Max (414px+)
   ======================================== */

@media only screen and (min-width: 414px) and (max-width: 480px) {
    html {
        font-size: 15px;
    }

    .hero h1 {
        font-size: 2.25rem !important;
    }

    .amount-options {
        grid-template-columns: repeat(3, 1fr) !important;
    }
}

/* ========================================
   Notch Support (iPhone X and newer)
   ======================================== */

@supports (padding-top: env(safe-area-inset-top)) {
    header {
        padding-top: max(0.75rem, env(safe-area-inset-top)) !important;
    }

    .chatbot-widget {
        padding-bottom: env(safe-area-inset-bottom) !important;
    }

    footer {
        padding-bottom: max(2rem, env(safe-area-inset-bottom)) !important;
    }
    
    /* ========================================
       RESERVATION FORM - iPhone Optimizations
       ======================================== */
    
    /* Form container */
    .reservation-form,
    form[name="reservationForm"],
    .form-container {
        padding: 1.5rem 1rem !important;
        margin: 0 !important;
        max-width: 100% !important;
        background: white !important;
        border-radius: 12px !important;
        box-shadow: 0 4px 20px rgba(0,0,0,0.1) !important;
    }
    
    /* Form title */
    .reservation-form h2,
    form h2 {
        font-size: 1.75rem !important;
        margin-bottom: 1.5rem !important;
        text-align: center !important;
    }
    
    /* Form groups */
    .form-group {
        margin-bottom: 1.25rem !important;
    }
    
    /* Labels - Larger and clearer */
    .form-group label,
    label {
        font-size: 1rem !important;
        font-weight: 600 !important;
        color: #1e293b !important;
        margin-bottom: 0.5rem !important;
        display: block !important;
    }
    
    /* All input fields */
    input[type="text"],
    input[type="email"],
    input[type="tel"],
    input[type="date"],
    input[type="time"],
    input[type="number"],
    select,
    textarea {
        width: 100% !important;
        padding: 1rem !important;
        font-size: 16px !important; /* Prevents zoom on iOS */
        border: 2px solid #e2e8f0 !important;
        border-radius: 8px !important;
        background: white !important;
        color: #1e293b !important;
        transition: all 0.3s ease !important;
        -webkit-appearance: none !important;
        appearance: none !important;
        box-sizing: border-box !important;
    }
    
    /* Focus state for inputs */
    input:focus,
    select:focus,
    textarea:focus {
        outline: none !important;
        border-color: var(--yellow-sun, #FFC93C) !important;
        box-shadow: 0 0 0 3px rgba(255, 201, 60, 0.1) !important;
    }
    
    /* Select dropdown icon */
    select {
        background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 12 12'%3E%3Cpath fill='%231e293b' d='M10.293 3.293L6 7.586 1.707 3.293A1 1 0 00.293 4.707l5 5a1 1 0 001.414 0l5-5a1 1 0 10-1.414-1.414z'/%3E%3C/svg%3E") !important;
        background-repeat: no-repeat !important;
        background-position: right 1rem center !important;
        padding-right: 2.5rem !important;
    }
    
    /* Textarea */
    textarea {
        min-height: 120px !important;
        resize: vertical !important;
        font-family: inherit !important;
    }
    
    /* Submit button - Large and prominent */
    button[type="submit"],
    .btn-submit,
    .submit-btn {
        width: 100% !important;
        padding: 1.25rem !important;
        font-size: 1.125rem !important;
        font-weight: 700 !important;
        background: linear-gradient(135deg, var(--yellow-sun, #FFC93C), var(--orange-sun, #FF8C00)) !important;
        color: white !important;
        border: none !important;
        border-radius: 12px !important;
        cursor: pointer !important;
        transition: all 0.3s ease !important;
        box-shadow: 0 4px 15px rgba(255, 201, 60, 0.4) !important;
        margin-top: 1.5rem !important;
        -webkit-appearance: none !important;
        appearance: none !important;
    }
    
    button[type="submit"]:active {
        transform: scale(0.98) !important;
        box-shadow: 0 2px 10px rgba(255, 201, 60, 0.3) !important;
    }
    
    /* Date and time pickers - iOS native */
    input[type="date"],
    input[type="time"] {
        position: relative !important;
    }
    
    /* Loading state */
    .loading {
        opacity: 0.6 !important;
        pointer-events: none !important;
    }
    
    /* Success/Error messages */
    .success-message,
    .error-message {
        padding: 1rem !important;
        border-radius: 8px !important;
        margin: 1rem 0 !important;
        font-size: 1rem !important;
        text-align: center !important;
    }
    
    .success-message {
        background: #d1fae5 !important;
        color: #065f46 !important;
        border: 2px solid #10b981 !important;
    }
    
    .error-message {
        background: #fee2e2 !important;
        color: #991b1b !important;
        border: 2px solid #ef4444 !important;
    }
    
    /* Required field indicator */
    .required::after {
        content: " *" !important;
        color: #ef4444 !important;
    }
    
    /* Phone number input - specific styling */
    input[type="tel"] {
        letter-spacing: 0.5px !important;
    }
    
    /* Number input for guests */
    input[type="number"] {
        text-align: center !important;
        font-size: 1.125rem !important;
        font-weight: 600 !important;
    }
    
    /* Remove number spinner on iOS */
    input[type="number"]::-webkit-inner-spin-button,
    input[type="number"]::-webkit-outer-spin-button {
        -webkit-appearance: none !important;
        margin: 0 !important;
    }
    
    /* ========================================
       CHATBOT DATE PICKER - iPhone Optimization
       ======================================== */
    
    .chatbot-date-picker {
        -webkit-appearance: none !important;
        appearance: none !important;
        width: 100% !important;
        padding: 1rem !important;
        border: 2px solid var(--yellow-sun, #FFC93C) !important;
        border-radius: 12px !important;
        font-size: 16px !important; /* Prevents zoom on iOS */
        font-family: inherit !important;
        background: white !important;
        color: #1e293b !important;
        cursor: pointer !important;
        box-shadow: 0 4px 15px rgba(255, 201, 60, 0.3) !important;
        font-weight: 600 !important;
    }
    
    .chatbot-date-picker:focus {
        outline: none !important;
        border-color: var(--orange-sun, #FF8C00) !important;
        box-shadow: 0 0 0 4px rgba(255, 201, 60, 0.2) !important;
    }
    
    .chatbot-date-picker::-webkit-calendar-picker-indicator {
        font-size: 1.5rem !important;
        padding: 0.5rem !important;
        cursor: pointer !important;
    }
}

/* ========================================
   Dark Mode Support
   ======================================== */

@media (prefers-color-scheme: dark) {
    .mobile-menu-toggle span {
        background: white !important;
    }
}

/* ========================================
   Performance Optimizations
   ======================================== */

@media only screen and (max-width: 480px) {
    /* Use GPU acceleration for animations */
    .slide,
    .slideshow,
    nav {
        transform: translateZ(0);
        backface-visibility: hidden;
        perspective: 1000px;
    }

    /* Optimize images */
    img {
        image-rendering: -webkit-optimize-contrast;
    }

    /* Smooth scrolling */
    html {
        scroll-behavior: smooth;
        -webkit-overflow-scrolling: touch;
    }

    /* Prevent overscroll bounce */
    body {
        overscroll-behavior-y: contain;
    }
}
