/**
 * OPTIMIZACIÓN MÓVIL MEJORADA - VERSIÓN ULTRA LIGERA
 * Optimizado específicamente para iPhone 12/13/14/15 (Pro/Pro Max)
 * Viewport: 390px - 428px de ancho
 */

/* ========================================
   CONFIGURACIÓN BASE - PREVENCIÓN DE ZOOM
   ======================================== */

@media only screen and (max-width: 768px) {
    
    /* Prevenir zoom en iOS */
    * {
        -webkit-tap-highlight-color: rgba(255, 201, 60, 0.2);
        -webkit-touch-callout: none;
        -webkit-user-select: none;
        user-select: none;
    }
    
    /* Inputs y selects - 16px previene zoom en iOS */
    input,
    textarea,
    select,
    button {
        font-size: 16px !important;
        -webkit-appearance: none;
        appearance: none;
    }

    html {
        font-size: 14px;
        -webkit-text-size-adjust: 100%;
        -moz-text-size-adjust: 100%;
        text-size-adjust: 100%;
        overflow-x: hidden;
    }

    body {
        overflow-x: hidden;
        width: 100%;
        max-width: 100vw;
        position: relative;
    }

    /* ========================================
       IMÁGENES OPTIMIZADAS CON CLOUDINARY
       ======================================== */

    /* Hero images - versión móvil */
    #hero,
    #catering-hero,
    .hero-section {
        background-size: cover !important;
        background-position: center center !important;
        background-attachment: scroll !important; /* Mejor performance en móvil */
    }

    /* Lazy loading para todas las imágenes */
    img {
        max-width: 100%;
        height: auto;
        -webkit-backface-visibility: hidden;
        backface-visibility: hidden;
        loading: lazy;
    }

    /* Imágenes del menú */
    .menu-item img,
    .menu-card img {
        width: 100% !important;
        height: auto !important;
        min-height: 180px !important;
        max-height: 220px !important;
        object-fit: cover !important;
        border-radius: 12px !important;
    }

    /* Imágenes de catering */
    .service-section img,
    .gallery-image img {
        width: 100% !important;
        height: auto !important;
        object-fit: cover !important;
        border-radius: 12px !important;
    }

    /* ========================================
       HEADER Y NAVEGACIÓN - TÁCTIL OPTIMIZADO
       ======================================== */

    header {
        padding: 0.8rem 1rem !important;
        position: sticky !important;
        top: 0;
        z-index: 1000;
        background: linear-gradient(135deg, rgba(22, 91, 51, 0.98) 0%, rgba(196, 30, 58, 0.98) 100%) !important;
        backdrop-filter: blur(10px);
    }

    .header-content {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 0;
        gap: 1rem;
    }

    /* Logo móvil */
    .logo img {
        height: 45px !important;
        width: auto !important;
    }

    /* Botón hamburguesa - ÁREA TÁCTIL MÍNIMA 44px */
    .mobile-menu-toggle {
        display: flex !important;
        flex-direction: column;
        justify-content: space-around;
        width: 44px !important;
        height: 44px !important;
        background: transparent;
        border: none;
        cursor: pointer;
        padding: 8px;
        z-index: 10001;
        position: relative;
    }

    .mobile-menu-toggle span {
        width: 28px;
        height: 3px;
        background: white;
        border-radius: 10px;
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        position: relative;
        transform-origin: center;
    }

    /* Animación hamburguesa → X */
    .mobile-menu-toggle.active span:nth-child(1) {
        transform: translateY(9px) rotate(45deg);
    }

    .mobile-menu-toggle.active span:nth-child(2) {
        opacity: 0;
        transform: translateX(-20px);
    }

    .mobile-menu-toggle.active span:nth-child(3) {
        transform: translateY(-9px) rotate(-45deg);
    }

    /* Menú móvil deslizante */
    header nav {
        position: fixed;
        top: 0;
        right: -100%;
        width: 85%;
        max-width: 320px;
        height: 100vh;
        height: 100dvh; /* Dynamic viewport para iOS */
        background: linear-gradient(135deg, rgba(10, 37, 64, 0.98) 0%, rgba(15, 23, 42, 0.98) 100%);
        backdrop-filter: blur(20px);
        padding: 80px 1.5rem 2rem 1.5rem;
        transition: right 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        z-index: 10000;
        overflow-y: auto;
        -webkit-overflow-scrolling: touch;
        box-shadow: -5px 0 30px rgba(0, 0, 0, 0.5);
    }

    header nav.active {
        right: 0;
    }

    /* Lista del menú */
    header nav ul {
        flex-direction: column;
        gap: 0;
        padding: 0;
        margin: 0;
        list-style: none;
    }

    header nav ul li {
        width: 100%;
        border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    }

    /* Links del menú - ÁREA TÁCTIL MÍNIMA 48px */
    header nav ul li a {
        display: block;
        padding: 1.2rem 0 !important;
        font-size: 1.1rem !important;
        color: white !important;
        text-decoration: none;
        transition: all 0.3s ease;
        min-height: 48px;
    }

    header nav ul li a:hover,
    header nav ul li a.active {
        color: var(--yellow-sun) !important;
        padding-left: 12px !important;
        text-shadow: 0 0 10px rgba(255, 201, 60, 0.4);
    }

    /* Overlay oscuro cuando menú abierto */
    .mobile-nav-overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100vh;
        height: 100dvh;
        background: rgba(0, 0, 0, 0.75);
        backdrop-filter: blur(5px);
        opacity: 0;
        visibility: hidden;
        transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        z-index: 9999;
        touch-action: none;
    }

    .mobile-nav-overlay.active {
        opacity: 1;
        visibility: visible;
    }

    /* Header actions - ocultar en móvil */
    .header-actions {
        display: none !important;
    }

    /* Botones en menú móvil */
    header nav .mobile-menu-actions {
        margin-top: 2rem;
        padding-top: 2rem;
        border-top: 1px solid rgba(255, 255, 255, 0.1);
    }

    header nav .mobile-menu-actions .language-toggle {
        display: flex;
        gap: 0.5rem;
        margin-bottom: 1.5rem;
        justify-content: center;
    }

    header nav .mobile-menu-actions .lang-btn {
        flex: 1;
        padding: 0.8rem 1rem !important;
        font-size: 0.95rem !important;
        min-height: 44px;
        border-radius: 8px;
    }

    header nav .mobile-menu-actions .btn-primary {
        display: block;
        width: 100%;
        text-align: center;
        padding: 1.2rem 2rem !important;
        background: linear-gradient(135deg, var(--yellow-sun), var(--orange-sun));
        color: var(--deep-ocean);
        font-weight: 700;
        font-size: 1.1rem !important;
        border-radius: 50px;
        text-decoration: none;
        box-shadow: 0 8px 25px rgba(255, 201, 60, 0.4);
        min-height: 56px;
    }

    /* ========================================
       HERO SECTION - OPTIMIZADO PARA iPHONE
       ======================================== */

    #hero,
    #catering-hero,
    .hero-section {
        min-height: 75vh !important;
        height: 75vh !important;
        max-height: 75vh !important;
        padding-top: 0 !important;
        position: relative;
        overflow: hidden;
    }

    .hero-overlay {
        padding: 2rem 1rem !important;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        text-align: center;
        min-height: 75vh;
    }

    .hero-overlay h1 {
        font-size: clamp(1.8rem, 5vw, 2.2rem) !important;
        line-height: 1.2 !important;
        margin-bottom: 1rem !important;
        padding: 0 0.5rem;
        font-weight: 800;
        text-shadow: 0 2px 10px rgba(0, 0, 0, 0.5);
    }

    .hero-overlay p {
        font-size: clamp(0.95rem, 3vw, 1.1rem) !important;
        padding: 0 0.5rem;
        margin-bottom: 2rem !important;
        line-height: 1.5 !important;
        max-width: 90%;
        text-shadow: 0 2px 8px rgba(0, 0, 0, 0.5);
    }

    /* Hero Buttons - Stack vertical en móvil */
    .hero-buttons,
    .cta-buttons {
        flex-direction: column !important;
        gap: 1rem !important;
        padding: 0 1rem !important;
        width: 100%;
        max-width: 400px;
        margin: 0 auto;
    }

    .hero-buttons .btn,
    .cta-buttons .btn {
        width: 100% !important;
        padding: 1.2rem 2rem !important;
        font-size: 1.05rem !important;
        text-align: center;
        min-height: 56px;
        border-radius: 50px !important;
        font-weight: 700;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
    }

    /* Scroll indicator */
    .scroll-indicator {
        bottom: 1.5rem !important;
        font-size: 2rem !important;
    }

    /* Hero slider para catering */
    .hero-slide {
        background-size: cover !important;
        background-position: center !important;
        background-attachment: scroll !important;
    }

    /* Stats section en hero */
    .stats-bar,
    .hero-stats {
        flex-direction: column !important;
        gap: 1.2rem !important;
        padding: 1.5rem 1rem !important;
    }

    .stat-item {
        flex: 1;
        text-align: center !important;
        padding: 1rem !important;
    }

    .stat-item h3 {
        font-size: 2rem !important;
    }

    .stat-item p {
        font-size: 0.9rem !important;
    }

    /* ========================================
       FORMULARIOS - OPTIMIZADO PARA TÁCTIL
       ======================================== */

    form {
        padding: 1.5rem 1rem !important;
        background: white;
        border-radius: 12px;
    }

    .form-group {
        margin-bottom: 1.2rem !important;
    }

    input,
    textarea,
    select {
        width: 100% !important;
        padding: 1rem 1.2rem !important;
        font-size: 16px !important; /* Previene zoom */
        border-radius: 8px !important;
        border: 2px solid #e5e7eb !important;
        margin-bottom: 0 !important;
        min-height: 48px !important;
        background: white;
        color: #333;
        transition: border-color 0.3s ease;
    }

    input:focus,
    textarea:focus,
    select:focus {
        outline: none;
        border-color: var(--yellow-sun) !important;
        box-shadow: 0 0 0 3px rgba(255, 201, 60, 0.1);
    }

    textarea {
        min-height: 120px !important;
        resize: vertical;
    }

    /* Labels */
    label {
        display: block;
        margin-bottom: 0.5rem !important;
        font-weight: 600;
        color: #333;
        font-size: 0.95rem !important;
    }

    /* Botones de formulario - ÁREA TÁCTIL MÍNIMA 56px */
    button[type="submit"],
    .submit-btn,
    .btn-submit {
        width: 100% !important;
        padding: 1.3rem 2rem !important;
        font-size: 1.1rem !important;
        min-height: 56px !important;
        border-radius: 50px !important;
        font-weight: 700;
        background: linear-gradient(135deg, var(--yellow-sun), var(--orange-sun));
        color: var(--deep-ocean);
        border: none;
        cursor: pointer;
        box-shadow: 0 4px 15px rgba(255, 201, 60, 0.3);
        transition: all 0.3s ease;
    }

    button[type="submit"]:active,
    .submit-btn:active {
        transform: scale(0.98);
        box-shadow: 0 2px 8px rgba(255, 201, 60, 0.2);
    }

    /* Form grid - siempre 1 columna en móvil */
    .form-row,
    .form-grid {
        grid-template-columns: 1fr !important;
        gap: 1.2rem !important;
    }

    /* ========================================
       MENÚ DE COMIDA - CARDS OPTIMIZADAS
       ======================================== */

    /* Tabs del menú */
    .menu-tabs {
        display: flex;
        gap: 0.5rem;
        padding: 1rem;
        overflow-x: auto;
        -webkit-overflow-scrolling: touch;
        scroll-snap-type: x proximity;
        scrollbar-width: none; /* Firefox */
        -ms-overflow-style: none; /* IE/Edge */
    }

    .menu-tabs::-webkit-scrollbar {
        display: none; /* Chrome/Safari */
    }

    .menu-tab {
        flex: 0 0 auto;
        padding: 0.9rem 1.8rem !important;
        font-size: 0.95rem !important;
        white-space: nowrap;
        min-height: 48px !important;
        border-radius: 50px;
        scroll-snap-align: start;
    }

    /* Grid de menú - 1 columna */
    .menu-grid {
        grid-template-columns: 1fr !important;
        gap: 1.2rem !important;
        padding: 1rem !important;
    }

    /* Cards del menú */
    .menu-item,
    .menu-card {
        padding: 1.2rem !important;
        margin-bottom: 1.2rem !important;
        border-radius: 12px !important;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.08) !important;
        background: white;
    }

    .menu-item h3,
    .menu-card h3 {
        font-size: 1.3rem !important;
        margin-bottom: 0.5rem !important;
        color: var(--deep-ocean);
        font-weight: 700;
    }

    .menu-item .price,
    .menu-card .price {
        font-size: 1.2rem !important;
        color: var(--yellow-sun);
        font-weight: 700;
        margin: 0.5rem 0;
    }

    .menu-item p,
    .menu-card p {
        font-size: 0.95rem !important;
        line-height: 1.6 !important;
        color: #666;
        margin-bottom: 1rem !important;
    }

    .menu-item .allergens,
    .menu-card .allergens {
        font-size: 0.85rem !important;
        color: #999;
        font-style: italic;
    }

    /* ========================================
       SECCIONES DE SERVICIOS (CATERING)
       ======================================== */

    .service-section {
        padding: 2rem 1rem !important;
    }

    .service-content {
        grid-template-columns: 1fr !important;
        gap: 1.5rem !important;
    }

    .service-text {
        order: 1;
    }

    .service-image {
        order: 2;
    }

    .service-text h2 {
        font-size: 1.8rem !important;
        margin-bottom: 1rem !important;
    }

    .service-text ul {
        padding-left: 1.5rem;
    }

    .service-text ul li {
        font-size: 0.95rem !important;
        margin-bottom: 0.8rem !important;
        line-height: 1.6 !important;
    }

    /* Gallery móvil */
    .gallery-grid {
        grid-template-columns: 1fr !important;
        gap: 1rem !important;
        padding: 1rem !important;
    }

    .gallery-item {
        border-radius: 12px !important;
        overflow: hidden;
    }

    /* ========================================
       CHATBOT MÓVIL
       ======================================== */

    /* Widget flotante */
    #chatbot-widget {
        bottom: 80px !important;
        right: 20px !important;
        width: 60px !important;
        height: 60px !important;
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.2);
    }

    #chatbot-widget button {
        width: 60px !important;
        height: 60px !important;
        font-size: 1.8rem !important;
        border-radius: 50%;
    }

    /* Contenedor del chat */
    #chatbot-container {
        position: fixed !important;
        bottom: 0 !important;
        right: 0 !important;
        left: 0 !important;
        width: 100% !important;
        max-width: 100% !important;
        height: 85vh !important;
        height: 85dvh !important;
        max-height: 85vh !important;
        border-radius: 20px 20px 0 0 !important;
        margin: 0 !important;
        box-shadow: 0 -5px 30px rgba(0, 0, 0, 0.3) !important;
    }

    #chatbot-container .chatbot-header {
        padding: 1.2rem 1rem !important;
        border-radius: 20px 20px 0 0 !important;
        background: linear-gradient(135deg, var(--deep-ocean), var(--ocean-blue));
    }

    #chatbot-container .chatbot-header h3 {
        font-size: 1.1rem !important;
    }

    #chatbot-messages {
        padding: 1rem !important;
        max-height: calc(85vh - 180px) !important;
        max-height: calc(85dvh - 180px) !important;
        overflow-y: auto;
        -webkit-overflow-scrolling: touch;
    }

    .message {
        max-width: 85% !important;
        font-size: 0.95rem !important;
        padding: 0.9rem 1.1rem !important;
        margin-bottom: 0.8rem !important;
        border-radius: 12px;
        line-height: 1.5 !important;
    }

    .chatbot-button {
        padding: 1rem 1.3rem !important;
        font-size: 0.95rem !important;
        margin: 0.5rem !important;
        min-height: 48px !important;
        border-radius: 8px;
    }

    #chatbot-input {
        padding: 1rem !important;
        font-size: 16px !important;
        min-height: 48px;
    }

    /* ========================================
       SECCIONES GENERALES
       ======================================== */

    section {
        padding: 2.5rem 1rem !important;
    }

    .container {
        padding: 0 1rem !important;
        max-width: 100% !important;
    }

    /* Tipografía responsive */
    h1 { 
        font-size: clamp(1.8rem, 5vw, 2.2rem) !important;
        line-height: 1.2 !important;
    }
    
    h2 { 
        font-size: clamp(1.5rem, 4vw, 1.9rem) !important;
        line-height: 1.3 !important;
    }
    
    h3 { 
        font-size: clamp(1.2rem, 3.5vw, 1.5rem) !important;
        line-height: 1.4 !important;
    }
    
    h4 { 
        font-size: clamp(1.1rem, 3vw, 1.3rem) !important;
        line-height: 1.4 !important;
    }
    
    p { 
        font-size: clamp(0.95rem, 2.5vw, 1.05rem) !important;
        line-height: 1.6 !important;
    }

    /* ========================================
       CARDS Y GRIDS
       ======================================== */

    .grid-2,
    .grid-3,
    .grid-4,
    .features-grid {
        grid-template-columns: 1fr !important;
        gap: 1.5rem !important;
    }

    .card {
        padding: 1.5rem !important;
        margin-bottom: 1.5rem !important;
        border-radius: 12px !important;
    }

    /* Features carousel */
    .features-scroll-container {
        padding: 20px 0 !important;
        margin: 0 !important;
        overflow-x: auto;
        -webkit-overflow-scrolling: touch;
        scrollbar-width: none;
    }

    .features-scroll-container::-webkit-scrollbar {
        display: none;
    }

    .feature-mini-card {
        min-width: 110px !important;
        padding: 1rem 0.6rem !important;
        flex: 0 0 auto;
    }

    .feature-mini-card div {
        font-size: 2.2rem !important;
        margin-bottom: 0.4rem !important;
    }

    .feature-mini-card h4 {
        font-size: 0.8rem !important;
        line-height: 1.2 !important;
    }

    /* ========================================
       FOOTER MÓVIL
       ======================================== */

    footer {
        padding: 2.5rem 1rem !important;
        text-align: center;
    }

    footer .footer-content {
        flex-direction: column;
        gap: 2rem;
    }

    footer .footer-section {
        width: 100% !important;
        margin-bottom: 1.5rem !important;
    }

    footer h3 {
        font-size: 1.3rem !important;
        margin-bottom: 1rem !important;
    }

    footer p,
    footer a {
        font-size: 0.95rem !important;
    }

    /* Social icons */
    .social-icons {
        justify-content: center;
        gap: 1.5rem;
    }

    .social-icons a {
        font-size: 1.8rem !important;
        min-width: 44px;
        min-height: 44px;
        display: flex;
        align-items: center;
        justify-content: center;
    }

    /* ========================================
       UTILIDADES
       ======================================== */

    .hide-mobile {
        display: none !important;
    }

    .show-mobile {
        display: block !important;
    }

    /* Espaciado táctil - iOS Human Interface Guidelines */
    a:not(.btn),
    button:not(.btn) {
        min-height: 44px;
        min-width: 44px;
        display: inline-flex;
        align-items: center;
        justify-content: center;
    }

    /* ========================================
       OPTIMIZACIONES DE PERFORMANCE
       ======================================== */

    /* Smooth scrolling */
    * {
        -webkit-overflow-scrolling: touch;
    }

    /* Reducir animaciones en móvil para mejor performance */
    * {
        animation-duration: 0.4s !important;
        transition-duration: 0.3s !important;
    }

    /* GPU acceleration para elementos animados */
    .hero-slide,
    header,
    #chatbot-container,
    header nav {
        transform: translate3d(0, 0, 0);
        -webkit-transform: translate3d(0, 0, 0);
        will-change: transform;
    }

    /* Disable parallax en móvil */
    [data-parallax],
    .parallax {
        background-attachment: scroll !important;
    }

    /* ========================================
       LOCATION PAGE - MAPA MÓVIL
       ======================================== */

    #map {
        height: 300px !important;
        width: 100% !important;
        border-radius: 12px !important;
        margin: 1rem 0 !important;
    }

    .location-info {
        padding: 1.5rem 1rem !important;
    }

    /* ========================================
       REVIEWS - CARDS MÓVIL
       ======================================== */

    .review-card {
        padding: 1.5rem !important;
        margin-bottom: 1.2rem !important;
        border-radius: 12px !important;
    }

    .review-card .rating {
        font-size: 1.1rem !important;
        margin-bottom: 0.8rem !important;
    }

    .review-card p {
        font-size: 0.95rem !important;
        line-height: 1.6 !important;
    }

    .review-card .reviewer-name {
        font-size: 0.9rem !important;
        margin-top: 1rem !important;
    }
}

/* ========================================
   LANDSCAPE MÓVIL
   ======================================== */

@media only screen and (max-width: 896px) and (orientation: landscape) {
    
    #hero,
    #catering-hero,
    .hero-section {
        min-height: 100vh !important;
        height: 100vh !important;
    }

    .hero-overlay h1 {
        font-size: 1.6rem !important;
    }

    .hero-overlay p {
        font-size: 0.9rem !important;
    }

    #chatbot-container {
        height: 95vh !important;
        height: 95dvh !important;
    }

    .mobile-menu-toggle {
        width: 40px !important;
        height: 40px !important;
    }
}

/* ========================================
   iPHONE SE (Pequeño - 375px)
   ======================================== */

@media only screen and (max-width: 375px) {
    
    html {
        font-size: 13px;
    }

    .logo img {
        height: 40px !important;
    }

    .hero-overlay h1 {
        font-size: 1.6rem !important;
    }

    .hero-overlay p {
        font-size: 0.9rem !important;
    }

    .hero-buttons .btn,
    .cta-buttons .btn {
        padding: 1rem 1.5rem !important;
        font-size: 1rem !important;
    }

    header nav {
        width: 90%;
        max-width: 280px;
    }
}

/* ========================================
   iPHONE PRO MAX (Grande - 428px)
   ======================================== */

@media only screen and (min-width: 428px) and (max-width: 768px) {
    
    html {
        font-size: 15px;
    }

    .hero-overlay h1 {
        font-size: 2.4rem !important;
    }

    .hero-overlay p {
        font-size: 1.15rem !important;
    }

    .hero-buttons .btn,
    .cta-buttons .btn {
        padding: 1.3rem 2.2rem !important;
        font-size: 1.1rem !important;
    }
}
